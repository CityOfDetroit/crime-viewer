{"version":3,"sources":["green.png","data/arrestCodes.js","components/Map.js","components/Sidebar.js","components/Intersection.js","components/CrimeTypeFilter.js","components/DateFilter.js","components/WelcomeModal.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","arrestCodes","area","description","category","Map","intersection","setIntersection","timeRange","crimeTypes","useState","theMap","setTheMap","useEffect","mapboxgl","accessToken","map","container","style","center","zoom","minZoom","on","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","MapboxGeocoder","bbox","addSource","type","url","data","features","updateIntersections","queryRenderedFeatures","layers","grouped","_","groupBy","coordinateFeatures","Object","keys","c","geometry","toString","length","gc","properties","setTimeout","getSource","setData","addLayer","id","source","filter","paint","minzoom","e","clicked","point","setFilter","console","log","JSON","parse","incidents","easeTo","lngLat","getCanvas","cursor","setZoom","arrestCharges","toPairs","forEach","ct","match","k","indexOf","concat","chargeFilter","filtered","cf","gridArea","Sidebar","close","children","padding","height","overflowY","className","src","green","display","Incident","incident","fieldStyle","stripe","fontWeight","fontSize","color","fontFamily","valueStyle","fields","Date","moment","incident_timestamp","format","Time","Offense","arrest_charge","report_number","Table","definition","compact","Body","entries","Row","Cell","width","Intersection","sort","a","b","Card","Content","Header","alignItems","justifyContent","margin","Icon","name","size","textAlign","inter","main","maxHeight","i","j","key","extra","CrimeTypeFilter","setCrimeTypes","byAreas","uniqBy","values","ac","marginTop","ak","u","text","value","minWidth","Dropdown","onChange","d","changedCrimeTypes","r","v","split","options","placeholder","labeled","fluid","multiple","selection","DateFilter","setTimeRange","Input","labelPosition","min","subtract","max","parseInt","Label","basic","WelcomeModal","Modal","as","Message","href","Filters","App","modal","setModal","unix","Violent","Property","Other","gridTemplateColumns","gridTemplateRows","gridTemplateAreas","open","onClose","closeIcon","onClick","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cbb2ab55.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/green.1c1583a9.png\";","const arrestCodes = {\n\"09001\": { area: \"Violent\", description: \"MURDER / NON-NEGLIGENT MANSLAUGHTER (VOLUNTARY)\", category: \"HOMICIDE\" },\n\"09002\": { area: \"Violent\", description: \"NEGLIGENT HOMICIDE / MANSLAUGHTER (INVOLUNTARY)\", category: \"HOMICIDE\" },\n\"09003\": { area: \"Violent\", description: \"NEGLIGENT HOMICIDE - VEHICLE / BOAT / SNOWMOBILE / ORV\", category: \"HOMICIDE\" },\n\"09004\": { area: \"Violent\", description: \"HOMICIDE - JUSTIFIABLE\", category: \"JUSTIFIABLE HOMICIDE\" },\n\"10001\": { area: \"Other\", description: \"KIDNAPPING / ABDUCTION\", category: \"KIDNAPPING\" },\n\"10002\": { area: \"Other\", description: \"PARENTAL KIDNAPPING\", category: \"KIDNAPPING\" },\n\"11001\": { area: \"Violent\", description: \"CSC 1ST DEGREE - PENIS / VAGINA\", category: \"SEXUAL ASSAULT\" },\n\"11002\": { area: \"Violent\", description: \"CSC 3RD DEGREE - PENIS / VAGINA\", category: \"SEXUAL ASSAULT\" },\n\"11003\": { area: \"Violent\", description: \"CSC 1ST DEGREE - ORAL / ANAL\", category: \"SEXUAL ASSAULT\" },\n\"11004\": { area: \"Violent\", description: \"CSC 3RD DEGREE - ORAL / ANAL\", category: \"SEXUAL ASSAULT\" },\n\"11005\": { area: \"Violent\", description: \"CSC 1ST DEGREE - OBJECT\", category: \"SEXUAL ASSAULT\" },\n\"11006\": { area: \"Violent\", description: \"CSC 3RD DEGREE - OBJECT\", category: \"SEXUAL ASSAULT\" },\n\"11007\": { area: \"Violent\", description: \"CSC 2ND DEGREE - FORCIBLE CONTACT\", category: \"SEX OFFENSES\" },\n\"11008\": { area: \"Violent\", description: \"CSC 4TH DEGREE - FORCIBLE CONTACT\", category: \"SEX OFFENSES\" },\n\"12000\": { area: \"Violent\", description: \"ROBBERY\", category: \"ROBBERY\" },\n\"12001\": { area: \"Violent\", description: \"ROBBERY - ARMED\", category: \"ROBBERY\" },\n\"12002\": { area: \"Violent\", description: \"ROBBERY - UNARMED\", category: \"ROBBERY\" },\n\"13001\": { area: \"Violent\", description: \"ASSAULT AND BATTERY/SIMPLE ASSAULT\", category: \"ASSAULT\" },\n\"13002\": { area: \"Violent\", description: \"AGGRAVATED / FELONIOUS ASSAULT\", category: \"AGGRAVATED ASSAULT\" },\n\"13003\": { area: \"Violent\", description: \"INTIMIDATION / STALKING\", category: \"ASSAULT\" },\n\"13012\": { area: \"Violent\", description: \"AGGRAVATED / FELONIOUS ASSAULT (DOMESTIC)\", category: \"AGGRAVATED ASSAULT\" },\n\"13016\": { area: \"Violent\", description: \"INTIMIDATION\", category: \"ASSAULT\" },\n\"20000\": { area: \"Property\", description: \"ARSON\", category: \"ARSON\" },\n\"21000\": { area: \"Property\", description: \"EXTORTION\", category: \"EXTORTION\" },\n\"22001\": { area: \"Property\", description: \"BURGLARY - FORCED ENTRY\", category: \"BURGLARY\" },\n\"22002\": { area: \"Property\", description: \"BURGLARY - ENTRY WITHOUT FORCE (INTENT TO COMMIT)\", category: \"BURGLARY\" },\n\"22003\": { area: \"Property\", description: \"ENTRY WITHOUT PERMISSION (NO INTENT)\", category: \"BURGLARY\" },\n\"22004\": { area: \"Property\", description: \"POSSESSION OF BURGLARY TOOLS\", category: \"BURGLARY\" },\n\"23001\": { area: \"Property\", description: \"LARCENY - POCKETPICKING\", category: \"LARCENY\" },\n\"23002\": { area: \"Property\", description: \"LARCENY - PURSE SNATCHING\", category: \"LARCENY\" },\n\"23003\": { area: \"Property\", description: \"LARCENY - THEFT FROM BUILDING\", category: \"LARCENY\" },\n\"23004\": { area: \"Property\", description: \"LARCENY - FROM A COIN OPERATED MACHINE\", category: \"LARCENY\" },\n\"23005\": { area: \"Property\", description: \"LARCENY - PERSONAL PROPERTY FROM MOTOR VEHICLE\", category: \"LARCENY\" },\n\"23006\": { area: \"Property\", description: \"LARCENY - THEFT OF MOTOR VEHICLE PARTS / ACCESSORIES\", category: \"LARCENY\" },\n\"23007\": { area: \"Property\", description: \"LARCENY - OTHER\", category: \"LARCENY\" },\n\"23009\": { area: \"Property\", description: \"LARCENY FROM GROUNDS\", category: \"LARCENY\" },\n\"23010\": { area: \"Property\", description: \"LARCENY OF MAIL\", category: \"LARCENY\" },\n\"23079\": { area: \"Property\", description: \"LARCENY OF GASOLINE - SELF SERVICE STATION\", category: \"LARCENY\" },\n\"24001\": { area: \"Property\", description: \"MOTOR VEHICLE THEFT\", category: \"STOLEN VEHICLE\" },\n\"24002\": { area: \"Property\", description: \"MOTOR VEHICLE AS STOLEN PROPERTY (RECOVERED ONLY)\", category: \"STOLEN PROPERTY\" },\n\"24003\": { area: \"Property\", description: \"MOTOR VEHICLE FRAUD\", category: \"STOLEN VEHICLE\" },\n\"25000\": { area: \"Other\", description: \"FORGERY / COUNTERFEITING\", category: \"FORGERY\" },\n\"26001\": { area: \"Other\", description: \"FRAUD - FALSE PRETENSE / SWINDLE / CONFIDENCE GAME\", category: \"FRAUD\" },\n\"26002\": { area: \"Other\", description: \"FRAUD - CREDIT CARD/AUTOMATIC TELLER MACHINE\", category: \"FRAUD\" },\n\"26003\": { area: \"Other\", description: \"FRAUD - IMPERSONATION\", category: \"FRAUD\" },\n\"26004\": { area: \"Other\", description: \"FRAUD - WELFARE\", category: \"FRAUD\" },\n\"26005\": { area: \"Other\", description: \"FRAUD BY WIRE\", category: \"FRAUD\" },\n\"26006\": { area: \"Other\", description: \"FRAUD - NON SUFFICENT FUNDS CHECKS\", category: \"FRAUD\" },\n\"28000\": { area: \"Property\", description: \"STOLEN PROPERTY\", category: \"STOLEN PROPERTY\" },\n\"28003\": { area: \"Property\", description: \"POSSESSION OF STOLEN PROPERTY\", category: \"STOLEN PROPERTY\" },\n\"29000\": { area: \"Property\", description: \"DAMAGE TO PROPERTY\", category: \"DAMAGE TO PROPERTY\" },\n\"30001\": { area: \"Other\", description: \"RETAIL FRAUD - MISREPRESENTATION\", category: \"FRAUD\" },\n\"30002\": { area: \"Other\", description: \"RETAIL FRAUD - THEFT\", category: \"FRAUD\" },\n\"35001\": { area: \"Other\", description: \"VIOLATION OF CONTROLED SUBSTANCE ACT - (VCSA)\", category: \"DANGEROUS DRUGS\" },\n\"35002\": { area: \"Other\", description: \"NARCOTIC EQUIPMENT VIOLATIONS\", category: \"DANGEROUS DRUGS\" },\n\"36001\": { area: \"Other\", description: \"SEXUAL PENETRATION NONFORCIBLE - BLOOD / AFFINITY\", category: \"SEX OFFENSES\" },\n\"36002\": { area: \"Other\", description: \"SEXUAL PENETRATION NONFORCIBLE - OTHER\", category: \"SEX OFFENSES\" },\n\"36004\": { area: \"Other\", description: \"SEX OFFENSE - OTHER\", category: \"SEX OFFENSES\" },\n\"36005\": { area: \"Other\", description: \"INDECENT EXPOSURE\", category: \"SEX OFFENSES\" },\n\"38001\": { area: \"Other\", description: \"FAMILY - ABUSE / NEGLECT NONVIOLENT\", category: \"FAMILY OFFENSE\" },\n\"38002\": { area: \"Other\", description: \"FAMILY - NONSUPPORT\", category: \"FAMILY OFFENSE\" },\n\"38003\": { area: \"Other\", description: \"FAMILY - OTHER\", category: \"FAMILY OFFENSE\" },\n\"39001\": { area: \"Other\", description: \"GAMBLING - BETTING / WAGERING\", category: \"GAMBLING\" },\n\"39003\": { area: \"Other\", description: \"GAMBLING - EQUIPMENT VIOLATIONS\", category: \"GAMBLING\" },\n\"40001\": { area: \"Other\", description: \"COMMERCIALIZED SEX - PROSTITUTION\", category: \"SEX OFFENSES\" },\n\"40002\": { area: \"Other\", description: \"COMMERCIALIZED SEX - ASSISTING / PROMOTING PROSTITUTION\", category: \"SEX OFFENSES\" },\n\"41001\": { area: \"Other\", description: \"LIQUOR LICENSE - ESTABLISHMENT\", category: \"LIQUOR\" },\n\"41002\": { area: \"Other\", description: \"LIQUOR VIOLATIONS - OTHER\", category: \"LIQUOR\" },\n\"41096\": { area: \"Other\", description: \"ALCOHOL - MINOR IN POSSESSION\", category: \"LIQUOR\" },\n\"48000\": { area: \"Other\", description: \"OBSTRUCTING POLICE\", category: \"OBSTRUCTING THE POLICE\" },\n\"48072\": { area: \"Other\", description: \"IMPERSONATING OF A POLICE OFFICER\", category: \"OBSTRUCTING THE POLICE\" },\n\"50000\": { area: \"Other\", description: \"OBSTRUCTING JUSTICE\", category: \"OBSTRUCTING JUDICIARY\" },\n\"50012\": { area: \"Other\", description: \"PROBATION VIOLATION\", category: \"OBSTRUCTING JUDICIARY\" },\n\"52001\": { area: \"Other\", description: \"WEAPONS OFFENSE - CONCEALED\", category: \"WEAPONS OFFENSES\" },\n\"52002\": { area: \"Other\", description: \"WEAPONS OFFENSE - EXPLOSSIVES\", category: \"WEAPONS OFFENSES\" },\n\"52003\": { area: \"Other\", description: \"WEAPONS OFFENSE - OTHER\", category: \"WEAPONS OFFENSES\" },\n\"53001\": { area: \"Other\", description: \"DISORDERLY CONDUCT - GENERAL\", category: \"DISORDERLY CONDUCT\" },\n\"53002\": { area: \"Other\", description: \"PUBLIC PEACE - OTHER\", category: \"DISORDERLY CONDUCT\" },\n\"54001\": { area: \"Other\", description: \"ACCIDENT, HIT & RUN\", category: \"OUIL\" },\n\"55000\": { area: \"Other\", description: \"HEALTH AND SAFETY\", category: \"OTHER\" },\n\"55086\": { area: \"Other\", description: \"ANIMAL - CRUELTY\", category: \"OTHER\" },\n\"57001\": { area: \"Other\", description: \"TRESPASS\", category: \"OTHER\" },\n\"57002\": { area: \"Other\", description: \"INVASION OF PRIVACY - OTHER\", category: \"OTHER\" },\n\"70000\": { area: \"Other\", description: \"RUNAWAY\", category: \"RUNAWAY\" },\n\"73000\": { area: \"Other\", description: \"MISCELLANEOUS CRIMINAL OFFENSE\", category: \"MISCELLANEOUS\" },\n\"75000\": { area: \"Other\", description: \"SOLICITATION (ALL CRIMES EXCEPT PROSTITUTION)\", category: \"SOLICITATION\" }\n};\n\nexport default arrestCodes;\n","import React, {useEffect, useState} from 'react'\nimport mapboxgl from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport _ from 'lodash';\nimport arrestCodes from '../data/arrestCodes';\n\nconst Map = ({ intersection, setIntersection, timeRange, crimeTypes }) => {\n\n  let [theMap, setTheMap] = useState(null)\n\n  useEffect(() => {\n    mapboxgl.accessToken = \"pk.eyJ1IjoiY2l0eW9mZGV0cm9pdCIsImEiOiJjaXZvOWhnM3QwMTQzMnRtdWhyYnk5dTFyIn0.FZMFi0-hvA60KYnI-KivWg\";\n    var map = new mapboxgl.Map({\n      container: \"map\", // container id\n      style: `mapbox://styles/cityofdetroit/cj9fqy8y48aq02smdgong5vc0`, // stylesheet location\n      center: [-83.0457, 42.331], // starting position [lng, lat]\n      zoom: 14, // starting zoom\n      minZoom: 13.01,\n    });\n      \n    map.on('load', ()=>{\n\n      map.addControl(new mapboxgl.NavigationControl());\n\n      map.addControl(new mapboxgl.GeolocateControl({\n        positionOptions: {\n        enableHighAccuracy: true\n        },\n        trackUserLocation: true\n        }));\n\n      map.addControl(new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken,\n        mapboxgl: mapboxgl,\n        bbox: [-83.287803,42.255192,-82.910451,42.45023]\n      }), 'top-left');\n      setTheMap(map)\n\n      map.addSource(\"rms-far\", {\n        type: \"vector\",\n        url: `mapbox://cityofdetroit.rms_mapbox_far`\n      })\n\n      map.addSource(\"intersections\", {\n        type: \"geojson\",\n        data: {\n          type: \"FeatureCollection\",\n          features: []\n        }\n      })\n\n      let updateIntersections = () => {\n        let features = map.queryRenderedFeatures({layers: ['rms-incidents-far']})\n        let grouped = _.groupBy(features, 'geometry.coordinates')\n        let coordinateFeatures = Object.keys(grouped).map(c => {\n          return {\n            \"type\": \"Feature\",\n            \"geometry\": grouped[c][0].geometry,\n            \"properties\": {\n              \"id\": c.toString(),\n              \"count\": grouped[c].length,\n              \"incidents\": grouped[c].map(gc => gc.properties)\n            }\n          }\n        })\n        setTimeout(() =>\n        map.getSource(\"intersections\").setData({type: \"FeatureCollection\", features: coordinateFeatures})\n        , 500)\n      }\n\n      map.addLayer({\n        id: \"rms-incidents-far\",\n        source: \"rms-far\",\n        \"source-layer\": \"rms_mapbox_far\",\n        filter: [\"all\", [\">=\", \"incident_timestamp\", timeRange[0]], [\"<=\", \"incident_timestamp\", timeRange[1]]],\n        type: 'circle',\n        paint: {\n          \"circle-opacity\": 0.0\n        },\n      })\n      \n      map.addLayer({\n        id: \"intersections\",\n        source: \"intersections\",\n        type: 'circle',\n        minzoom: 13.01,\n        paint: {\n          \"circle-opacity\": 0.75,\n          \"circle-radius\": ['+', ['*', ['log2', ['get', 'count']], 4], 5]\n        }\n      })\n\n      map.addLayer({\n        id: \"intersections-highlight\",\n        source: \"intersections\",\n        type: 'circle',\n        filter: ['==', 'id', 'none'],\n        minzoom: 13.01,\n        paint: {\n          \"circle-opacity\": 0.95,\n          \"circle-color\": '#FFAA1D',\n          \"circle-radius\": ['+', ['round', ['*', ['log2', ['get', 'count']], 4]], 11]\n        }\n      }, 'intersections')\n\n      updateIntersections()\n\n      map.on('click', e => {\n        let clicked = map.queryRenderedFeatures(e.point, {layers: ['intersections', 'intersections-highlight']})\n        if (clicked.length > 0) {\n          map.setFilter('intersections-highlight', ['==', 'id', clicked[0].properties.id])\n          console.log(clicked)\n          console.log(JSON.parse(clicked[0].properties.incidents))\n          map.easeTo({\n            center: e.lngLat\n          })\n          setIntersection(clicked[0])\n        }\n\n      })\n\n      map.on('mouseenter', 'intersections', e => {\n        map.getCanvas().style.cursor = 'crosshair'\n      })\n\n      map.on('mouseout', 'intersections', e => {\n        map.getCanvas().style.cursor = 'default'\n      })\n\n      map.on('moveend', e => {\n        setTimeout(() => updateIntersections(), 200)\n      })\n\n      setTimeout(() => map.setZoom(14.001), 500)\n\n    });\n\n  }, []);\n\n  useEffect(() => {\n    if(theMap) {\n      let arrestCharges = []\n      _.toPairs(crimeTypes).forEach(ct => {\n        let match = Object.keys(arrestCodes).filter(k => arrestCodes[k].area === ct[0] && ct[1].indexOf(arrestCodes[k].category) > -1 )\n        arrestCharges = arrestCharges.concat(match)\n      })\n\n      let chargeFilter = [\"!=\", \"arrest_charge\", \"nothing\"]\n\n      if(arrestCharges.length > 0) {\n        chargeFilter = [\"in\", \"arrest_charge\"].concat(arrestCharges)\n      }\n      // theMap.setFilter(\"rms-incidents\", [\"all\", [\">=\", \"incident_timestamp\", timeRange[0]], [\"<=\", \"incident_timestamp\", timeRange[1]], chargeFilter])\n      theMap.setFilter(\"rms-incidents-far\", [\"all\", [\">=\", \"incident_timestamp\", timeRange[0]], [\"<=\", \"incident_timestamp\", timeRange[1]], chargeFilter])\n      setTimeout(() => {\n        let features = theMap.queryRenderedFeatures({layers: ['rms-incidents-far']})\n        console.log(features)\n        let grouped = _.groupBy(features, 'geometry.coordinates')\n        let coordinateFeatures = Object.keys(grouped).map(c => {\n          return {\n            \"type\": \"Feature\",\n            \"geometry\": grouped[c][0].geometry,\n            \"properties\": {\n              \"id\": c.toString(),\n              \"count\": grouped[c].length,\n              \"incidents\": grouped[c].map(gc => gc.properties)\n            }\n          }\n        })\n        theMap.getSource(\"intersections\").setData({type: \"FeatureCollection\", features: coordinateFeatures})\n        if (intersection){\n          let filtered = coordinateFeatures.filter(cf => cf.properties.id === intersection.properties.id)\n          console.log(filtered[0])\n          if (filtered.length > 0) {\n            setIntersection(filtered[0])\n          }\n        }\n      }, 500)\n    }\n  },[timeRange, crimeTypes])\n  return (\n    <div id=\"map\" style={{gridArea: \"m\"}} />\n  )\n}\n\nexport default Map;","import React, {useState} from 'react';\nimport {Card, Icon} from 'semantic-ui-react'\nimport green from '../green.png'\n\nconst Sidebar = ({ close, children }) => {\n  \n  let sidebarStyle = {\n    gridArea: \"f\",\n    padding: '1em',\n    height: '100%',\n    overflowY: 'auto'\n  }  \n\n  let filterStyle = {\n    marginTop: '.5em',\n    padding: '.5em',\n    background: '#eee'\n  }\n\n  return (\n    <div style={sidebarStyle}>\n      <header>\n        <div className=\"rowDiv\">\n        <div className=\"rowDiv\">\n\n        <img src={green} style={{height: 50, display: 'inline-block'}} />\n        <h1 className=\"hul\">Detroit Crime Viewer\n        </h1>\n        </div>\n        {close}\n        </div>\n      </header>\n      {children}\n    </div>\n  )\n}\n\nexport default Sidebar;","import React from \"react\";\nimport arrestCodes from \"../data/arrestCodes\";\nimport moment from \"moment\";\nimport { Card, Icon, Table } from \"semantic-ui-react\";\n\nconst Incident = ({ incident, stripe }) => {\n  let incidentStyle = {\n    background: stripe ? \"#eee\" : \"#ddd\",\n    padding: 5\n  };\n\n  let fieldStyle = {\n    fontWeight: \"600\",\n    fontSize: `1.1em`,\n    color: `rgba(0,0,0,.65)`,\n    fontFamily: \"Roboto Condensed\"\n  };\n\n  let valueStyle = {\n    fontWeight: \"500\",\n    fontSize: `1.1em`,\n    color: `rgba(0,0,0,.65)`,\n    fontFamily: \"Roboto Condensed\"\n  };\n\n  let fields = {\n    Date: moment(incident.incident_timestamp * 1000).format(\"ddd, MMMM Do YYYY\"),\n    Time: moment(incident.incident_timestamp * 1000).format(\"h:mm a\"),\n    Offense: arrestCodes[incident.arrest_charge].description,\n    \"Report #\": incident.report_number\n  };\n\n  return (\n    <Table definition compact>\n      <Table.Body>\n        {Object.entries(fields).map(e => (\n          <Table.Row>\n            <Table.Cell width={2} style={fieldStyle}>\n              {e[0]}\n            </Table.Cell>\n            <Table.Cell width={10} style={valueStyle}>\n              {e[1]}\n            </Table.Cell>\n          </Table.Row>\n        ))}\n      </Table.Body>\n    </Table>\n  );\n};\n\nconst Intersection = ({ intersection }) => {\n  let incidents = intersection.properties.incidents;\n  if (typeof intersection.properties.incidents === \"string\") {\n    incidents = JSON.parse(intersection.properties.incidents).sort((a, b) => a.incident_timestamp > b.incident_timestamp);\n  }\n\n  let cardStyle = {\n    width: \"100%\"\n  };\n\n  let cardHeaderStyle = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    margin: 0\n  };\n\n  let headerStyle = {\n    margin: 0,\n    textAlign: \"right\"\n  };\n\n  return (\n    <Card style={cardStyle}>\n      <Card.Content>\n        <Card.Header style={cardHeaderStyle}>\n          <Icon name=\"crosshairs\" size=\"large\" />\n          <h2 className=\"hul\" style={headerStyle}>\n            {incidents[0].inter} & {incidents[0].main}\n          </h2>\n        </Card.Header>\n      </Card.Content>\n      <Card.Content style={{ maxHeight: \"40vh\", overflowY: \"auto\" }}>\n        {incidents.map((i, j) => (\n          <Incident incident={i} key={i.report_number + j} stripe={j % 2 === 0} />\n        ))}\n      </Card.Content>\n      <Card.Content extra>\n        {incidents.length} matching incident{incidents.length > 1 ? `s` : ``}\n      </Card.Content>\n    </Card>\n  );\n};\n\nexport default Intersection;\n","import React from 'react';\nimport _ from 'lodash'\nimport arrestCodes from '../data/arrestCodes';\nimport {Dropdown, Segment} from 'semantic-ui-react';\n\nconst CrimeTypeFilter = ({ crimeTypes, setCrimeTypes }) => {\n  let byAreas = _.groupBy(_.uniqBy(Object.values(arrestCodes), ac => ac.area + ac.category), 'area' )\n\n  return (\n    <section style={{marginTop: '1em'}}>\n      <h3>Change crime types</h3>\n      {Object.keys(byAreas).sort((a,b)=>a < b).map(ak => {\n        let keys = byAreas[ak].sort((a, b) => b.category < a.category).map(u => {\n          return {\n            key: `${u.area}_${u.category}`,\n            text: u.category,\n            value: `${u.area}_${u.category}`\n          }\n        })\n        return(\n          <div className=\"rowDiv\">\n        <h4 style={{display: 'inline-block', minWidth: 100, fontWeight: 500, margin: 0}}>{ak}</h4>\n        <Dropdown id={ak} onChange={(e, d) => {\n          let area = d.id\n          let changedCrimeTypes = {}\n          Object.keys(byAreas).forEach(r => {\n            if (r !== area) {\n              changedCrimeTypes[r] = crimeTypes[r]\n            }\n            else {\n              changedCrimeTypes[area] = d.value.map(v => v.split('_')[1])\n            }\n          })\n          setCrimeTypes(changedCrimeTypes)\n        }} options={keys} placeholder={`${ak} crimes`} labeled fluid multiple selection/>\n        </div>\n      )})}\n    </section>\n  )\n}\n\nexport default CrimeTypeFilter;","import React from \"react\";\nimport moment from \"moment\";\nimport { Input, Label, Segment } from \"semantic-ui-react\";\n\nexport const DateFilter = ({ timeRange, setTimeRange }) => {\n  let spanStyle = { display: \"inline-block\", minWidth: 100, fontWeight: 600, margin: 0 };\n  return (\n    <section>\n      <h3>Date range</h3>\n      <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-around'}}>\n\n        <Input\n          type=\"date\"\n          name=\"beginning\"\n          labelPosition='left' \n          min={moment().subtract(1, 'year').format(\"YYYY-MM-DD\")}\n          max={moment().format(\"YYYY-MM-DD\")}\n          value={moment(timeRange[0], \"X\").format(\"YYYY-MM-DD\")}\n          onChange={(e, d) => setTimeRange([parseInt(moment(d.value, \"YYYY-MM-DD\").format(\"X\")), timeRange[1]])}>\n                        <Label basic>From:</Label>\n            <input />\n          </Input>\n        <Input\n          type=\"date\"\n          name=\"ending\"\n          labelPosition='left' \n          min={moment().subtract(1, 'year').format(\"YYYY-MM-DD\")}\n          max={moment().format(\"YYYY-MM-DD\")}\n          value={moment(timeRange[1], \"X\").format(\"YYYY-MM-DD\")}\n          onChange={(e, d) => setTimeRange([timeRange[0], parseInt(moment(d.value, \"YYYY-MM-DD\").format(\"X\"))])}>\n\n            <Label basic>To:</Label>\n            <input />\n          </Input>\n          </div>\n        </section>\n  );\n};\n\nexport default DateFilter;\n","import React from 'react';\nimport {Modal, Icon, Container, Message} from 'semantic-ui-react'\n\nconst WelcomeModal = () => (\n  <>\n    <Modal.Header as='h2' style={{fontFamily: 'Montserrat', display: 'flex', alignItems: 'center', justifyContent: 'space-between', margin: 0}}>\n      <h2 style={{margin: 0}}>Welcome to the City of Detroit Crime Viewer</h2>\n    </Modal.Header>\n    \n    <Modal.Content>\n    <Message>\n      <Message.Header>Note: This tool is currently in BETA mode.</Message.Header>\n      <Message.Content>\n      Please submit all feedback to <a href=\"https://app.smartsheet.com/b/form/4b5e8883ad654704b7d04d1f9c747896\">this web form</a>.      </Message.Content>\n    </Message>\n    <p style={{fontSize: '1.25em'}}>You can use this tool to view crimes which occurred in the city of Detroit over the past year.</p>\n    <p style={{fontSize: '1.25em'}}><Icon name='filter'/>Adjust the <b>date range</b> or the list of <b>crime types</b> below to change which incidents appear on the map.</p>\n    <p style={{fontSize: '1.25em'}}><Icon name='search' />You can <b>search for an address</b> using the search bar in the top left of the map, or click the <b>geolocate</b> <Icon name='crosshairs'/> button to zoom to your current location.</p>\n    <p style={{fontSize: '1.25em'}}>Click <b>an intersection on the map</b> to bring up more information about the incidents which occurred there and match the current set of filters.</p>\n    <p style={{fontSize: '1.25em'}}>Do you want to access the raw data behind this tool? Visit the <b><a href=\"https://data.detroitmi.gov/datasets/rms-crime-incidents\">RMS Crime Incidents dataset</a></b> on the City's open data portal.</p>\n    <Message>\n      <Message.Header>A note on anonymization</Message.Header>\n      <Message.Content>\n        In order to protect the privacy of individuals connected to these incidents, the geographic coordinates of all incidents have been snapped to a nearby intersection. The coordinates and address provided in this data reflect the nearby anonymized intersection. \n      </Message.Content>\n    </Message>\n    </Modal.Content>\n  </>\n)\n\nexport default WelcomeModal;\n\n","import React, { useState } from \"react\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport Map from \"./components/Map\";\nimport Sidebar from \"./components/Sidebar\";\nimport Intersection from \"./components/Intersection\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport { Dropdown, Card, Icon, Modal } from \"semantic-ui-react\";\nimport \"./css/App.css\";\nimport arrestCodes from \"./data/arrestCodes\";\nimport CrimeTypeFilter from \"./components/CrimeTypeFilter\";\nimport DateFilter from \"./components/DateFilter\";\nimport WelcomeModal from \"./components/WelcomeModal\";\n\nconst Filters = ({ children }) => {\n  let cardStyle = {\n    width: \"100%\"\n  };\n\n  let cardHeaderStyle = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    margin: 0\n  };\n\n  let headerStyle = {\n    margin: 0\n  };\n\n  return (\n    <Card style={cardStyle}>\n      <Card.Content>\n        <Card.Header style={cardHeaderStyle}>\n          <Icon name=\"filter\" size=\"large\" />\n          <h2 style={headerStyle}>Adjust filters</h2>\n        </Card.Header>\n      </Card.Content>\n      <Card.Content style={{}}>{children}</Card.Content>\n    </Card>\n  );\n};\n\nconst ZoomToArea = ({ children }) => {\n  let filterStyle = {\n    marginTop: \".5em\",\n    padding: \".5em\",\n    background: \"#eee\"\n  };\n  return (\n    <section style={filterStyle}>\n      <h2>View area</h2>\n      {children}\n    </section>\n  );\n};\n\nfunction App() {\n  let [intersection, setIntersection] = useState(null);\n  let [modal, setModal] = useState(true);\n\n  // default time range is the last 14 days\n  let [timeRange, setTimeRange] = useState([\n    moment()\n      .subtract(14, \"days\")\n      .unix(),\n    moment().unix()\n  ]);\n\n  let [crimeTypes, setCrimeTypes] = useState({\n    Violent: [],\n    Property: [],\n    Other: []\n  });\n\n  let appStyle = {\n    display: \"grid\",\n    gridTemplateColumns: `minmax(450px, 2fr) 5fr`,\n    gridTemplateRows: `2fr 3fr`,\n    gridTemplateAreas: `\"f m\" \"f m\"`,\n    height: \"100vh\",\n    width: \"100vw\"\n  };\n\n  return (\n    <div className=\"App\" style={appStyle}>\n      <Modal open={modal} onClose={() => setModal(false)} closeIcon>\n        <WelcomeModal />\n      </Modal>\n      <Sidebar\n        close={\n          <Icon\n            name=\"help circle\"\n            size=\"large\"\n            onClick={() => setModal(true)}\n          />\n        }\n      >\n        <Filters>\n          <DateFilter timeRange={timeRange} setTimeRange={setTimeRange} />\n          <CrimeTypeFilter\n            crimeTypes={crimeTypes}\n            setCrimeTypes={setCrimeTypes}\n          />\n        </Filters>\n        {intersection && <Intersection intersection={intersection} />}\n      </Sidebar>\n      <Map\n        intersection={intersection}\n        setIntersection={setIntersection}\n        timeRange={timeRange}\n        crimeTypes={crimeTypes}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}