<!DOCTYPE html>
<html>

<head>
	<!-- Global Site Tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107915075-2"></script>

	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-107915075-2');
	</script>

	<meta charset='utf-8'>
	<title>Detroit Crime Viewer</title>
	<meta content='initial-scale=1,maximum-scale=1,user-scalable=no' name='viewport'>
	<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet'>
	<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.0/mapbox-gl-draw.css' type='text/css'/>
	<link href='./styles/jquery.scrollbar.css' rel='stylesheet'>
	<link href='./styles/tables.css' rel='stylesheet'>
	<link href='./styles/tabs.css' rel='stylesheet'>
	<link href='./styles/filter.css' rel='stylesheet'>
	<link href='./styles/main.css' rel='stylesheet'>
	<link href='./styles/print.css' rel='stylesheet'>
	<link href="./img/favicon.ico" rel="icon" sizes="16x16" type="image">
</head>

<body>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-supported/v1.2.0/mapbox-gl-supported.js'></script>

	<nav id="menu" class="">
		<div class="logo">
			<img src="./img/green.png">
			<h1>Crime Viewer</h1>
		</div>
		<div class="tabs">
			<div class="tab-content scrollbar-macosx">
				<div class="tab active" id="tab2">
					<div id="readable_filter_text"></div>
					<div id="point_details"></div>	
					<br/>
					<div class="tab-button">
						<button id="show-table" class="" style="display: none">Show Table</button>
						<button id="show-charts" class="">Show Charts</button>
					</div>
					
					<div id="table-container">
						<h4 class="sidebar-title">Incidents by Crime Type</h4>
						<table id="count_by_type">
							<tbody id="tbody"></tbody>
						</table>
						<p style="font-size:.9em;">Reference official definitions for each Crime Type <a target="_blank" href="https://ucr.fbi.gov/crime-in-the-u.s/2011/crime-in-the-u.s.-2011/offense-definitions">here</a>.</p>
					</div>
					<br/>
					<div id="charts">
						<div id="chart-container" style="width:100%; height:420px; display:none; margin-top:10px;"></div>
						<br/>
						<div id="line-chart-container" style="width:100%; height:300px; display:none;"></div>
						<div id="heatmap-container" style="width:100%; height:600px; display:none"></div>
					</div>
				</div>
				<div class="tab" id="tab3">
				</div>
			</div>
		</div>
	</nav>

	<!--Map-->
	<nav id="filters-menu">
		<div id="primary-nav" class="drop-shadow">
			<input type="button" class="dropdown-button" id="categories-dropdown-button" data-panel="#categories">
			<label for="categories-dropdown-button" class="dropdown-button">Crime Types<span id="categories-arrow" class="dropdown-arrow"><img src="./img/arrow.svg"/></span></label>
			
			<input type="button"class="dropdown-button" id="date-and-time-dropdown-button" data-panel="#date-and-time">
			<label for="date-and-time-dropdown-button" class="dropdown-button">Date/Time<span id="date-and-time-arrow" class="dropdown-arrow"><img src="./img/arrow.svg"/></span></label>
			
			<input type="button" class="dropdown-button" id="location-dropdown-button" data-panel="#location">
			<label for="location-dropdown-button" class="dropdown-button" >Location<span id="location-arrow" class="dropdown-arrow"><img src="./img/arrow.svg"/></span></label>
			
			<input type="button" id="reset-button" class="meta-button">
			<label for="reset-button" class="reset-button">Reset</label>

			<input type="button" id="print-button" class="meta-button">
			<label for="print-button" class="meta-button"><img src="img/print.svg"></label>

			<input type="button" id="about-button" class="meta-button">
			<label for="about-button" class="meta-button"><img src="img/about.svg"></label>

			<!--input type="button" id="share-button" class="meta-button">
			<label for="share-button" class="meta-button"><img src="img/share.svg"></label>
			<div id="share-url" style="display:none;">
				<span class="share-close"><img src="./img/close.svg"></span>
				<p>https://cityofdetroit.github.io/crime-viewer/?param=SampleFilters</p>
			</div-->
		</div>

		<div id="primary-panel">
			<section class="filters" id="categories">
			</section>
			<section class="filters" id="date-and-time">
				<div class="filter-instructions">These filters display incidents based on <b>when</b> the incident happened.<br/>You can <b>choose</b> the date range you're viewing, or you can pick <b>days of the week</b> or <b>times of the day</b> to filter by.</div>					
				<div class='filter-subcat'>
						<span class='filter-subcat-title'>Pick a date range</span>
						From:
						<br/>
						<input id="from_date" type="date" min="2016-12-06"></input>
						<br/>
						To:
						<br/>
						<input id="to_date" type="date" min="2016-12-06"></input>
				</div>
				<div class="filter-subcat xl" id="dow_filters">

					<span class="filter-subcat-title">Day of Week</span>
					<input type="checkbox" class="dow-checkbox" id="dow-1-check" name="" />
					<label id="dow-1-label" for="dow-1-check">Sun</label>
					<input type="checkbox" class="dow-checkbox" id="dow-2-check" name="" />
					<label for="dow-2-check">Mon</label>
					<input type="checkbox" class="dow-checkbox" id="dow-3-check" name="" />
					<label for="dow-3-check">Tue</label>
					<input type="checkbox" class="dow-checkbox" id="dow-4-check" name="" />
					<label for="dow-4-check">Wed</label>
					<input type="checkbox" class="dow-checkbox" id="dow-5-check" name="" />
					<label for="dow-5-check">Thu</label>
					<input type="checkbox" class="dow-checkbox" id="dow-6-check" name="" />
					<label for="dow-6-check">Fri</label>
					<input type="checkbox" class="dow-checkbox" id="dow-7-check" name="" />
					<label for="dow-7-check">Sat</label>

				</div>

				<div class="filter-subcat">

				<span class="filter-subcat-title xl">Time of Day</span>

					<input type="checkbox" id="morning-check" class="date-checkbox" name="" />
					<label for="morning-check"><img src="./img/morning.svg" alt=""/><span>5AM - 11AM</span></label>
					<input type="checkbox" id="afternoon-check" class="date-checkbox" name="" />
					<label for="afternoon-check"><img src="./img/cloudsun.svg" alt=""/><span>11AM - 5PM</span></label>
					<input type="checkbox" id="evening-check" class="date-checkbox" name="" />
					<label for="evening-check"><img src="./img/mooncloud.svg" alt=""/><span>5PM - 11PM</span></label>
					<input type="checkbox" id="overnight-check" class="date-checkbox" name="" />
					<label for="overnight-check"><img src="./img/overnight.svg" alt=""/><span>11PM - 5AM</span></label>
				</div>
			</section>
			<section class="filters" id="location">
				<div class="filter-instructions">These filters display incidents based on <b>where</b> the incident took place.<br/>You can <b>choose</b> from pre-made boundaries, <b>search</b> a 1 mile radius around an address or intersection, or <b>draw your own</b> custom area.</div>
				<div class='filter-subcat' id='map-boundaries'>
					<span class='filter-subcat-title'>Current boundary:</span>
					<input type="radio" data-control="" id="area-council-district" name="currentArea" value="council_district" checked="checked">
					<label for="area-council-district">Council districts</label>
					<br/><input type="radio" data-control="" id="area-precinct" name="currentArea" value="precinct">
					<label for="area-precinct">Police precincts</label>
					<br/><input type="radio" data-control="" id="area-neighborhood" name="currentArea" value="neighborhood">
					<label for="area-neighborhood">Neighborhoods</label>
					<br/><input type="radio" data-control="" id="area-zip-code" name="currentArea" value="zip_code">
					<label for="area-zip-code">Zip codes</label>
				</div>
				<div class='filter-subcat narrow'>
					<span class='filter-subcat-title'>Pick from map</span>
					<input type="radio" data-control="" id="area-pick" name="currentArea" value="pick">
					<label for="area-pick" id="area-pick-text">Select district</label>
				</div>
				<div class='filter-subcat wide' id="geocode_search">
					<span class='filter-subcat-title'>Search an address/intersection</span>
					<input id="locate" name="search" placeholder="ex '8515 W Chicago', 'Van Dyke & Harper'" type="text">
				</div>
				<div class='filter-subcat narrow'>
					<span class='filter-subcat-title'>Custom</span>
					<input type="radio" data-control="" id="area-custom" name="currentArea" value="custom">
					<label for="area-custom">Draw area</label>
				</div>
			</section>
		</div>
	</nav>

	<div id='map-overlay'>	
	</div>

	<div id='map'>
		<div class="disclaimer">
			<p><span class="disclaimer-close"><img src="./img/close.svg"></span><strong>Disclaimer:</strong><br/>In order to protect
				the privacy of crime victims, both the addresses and geographic coordinates (longitude and latitude) are masked. See
				the about page <img src="./img/about.svg" style="width:12px;"> to learn more.</p>
		</div>
		<div id="about-content" style="display:none;">
			<p><span class="about-close"><img src="./img/close.svg"></span></p>
			<h2 id="about-header">About</h2>
			<h3>Welcome to the City of Detroit's Crime Viewer</h3>
			<p>The <a target="_blank" href="http://www.detroitmi.gov/police">City of Detroit's Police Department (DPD)</a> and Department of Innovation and Technology (DoIT) are building a tool for residents to visualize crime data. By putting information in the hands of residents, we hope to work together to promote a safer community.</p>
			<h3>Where does the data come from?</h3>
			<p>The incident data that power this tool are provided by the Detroit Police Department (DPD) and made publicly available on the <a target="_blank" href="https://data.detroitmi.gov/">City of Detroit's open data portal</a>. Find the data and methodology description at <a target="_blank" href="https://data.detroitmi.gov/Public-Safety/DPD-All-Crime-Incidents-December-6-2016-Present/6gdg-y3kf">DPD: All Crime Incidents, December 6, 2016 - Present</a>.</p>
			<h3>How often is the dataset updated?</h3>
			<p>The dataset only reflects incidents that have been submitted to the <a target="_blank" href="http://www.micrstats.state.mi.us/MICR/Home.aspx">Michigan Incident Crime Reporting</a> tool (the date of submission is reflected in the "IBR Date" field on open data). The incident data represented here are preliminary in nature and subject to change. <b>In particular</b>, this means that crime will be underrepresented for very recent days (since the incidents have not yet been reported).</p>
			<h3>How are the data anonymized?</h3>
			<p>The addresses and datapoints which appear in this tool are anonymized; instead of a specific street address, data points
			get assigned to a specific block. We do this by randomly selecting a new point that is 1) within a certain distance
			of the original crime and 2) a certain distance of the associated street segment. It does <b>not</b> accurately represent
			where the incident happened.</p>
			<h3>Why do I see a jagged border after I draw a custom area or search for an address?</h3>
			<p>Before incident addresses are anonymized as described above, we stamp each original location with its respective neighborhood, council district and Census Block (learn more about Census Blocks <a href="https://www.census.gov/geo/reference/gtc/gtc_block.html" target="_blank">here</a>). After the anonymization process, the Census Block is the smallest geographic unit we can accurately rely on for aggregated reporting. Therefore, when you filter the map by Location and choose to "Draw a Custom Area" or "Search within a mile radius of an Address/Intersection", we automatically adjust your area to fit to the Census Blocks contained within it.<p>
			<h3>Who can I contact to learn more about the data?</h3 >
			<p>Should you have questions about the data, you may contact the Commanding Officer of the Detroit Police Department's
			Crime Intelligence Unit at 313-596-2250 or <a href="mailto:CrimeIntelligenceBureau@detroitmi.gov">CrimeIntelligenceBureau@detroitmi.gov</a>.</p>
			<h3>How can I share feedback?</h3>
			<p>Please share your ideas, suggestions, and any bugs you experience while using this tool through <a href="https://app.smartsheet.com/b/form/4b5e8883ad654704b7d04d1f9c747896" target="_blank">this web form</a>. Your response will be received by our project team.</p>
		</div>
	</div>
	<script src="./bundle.js"></script>
</body>

</html>